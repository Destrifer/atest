---
import Layout from "../layouts/Layout.astro";
---

<Layout>
	<h1>Отправка POST-запроса</h1>
	<button id="sendRequest">Отправить запрос</button>
	<p id="response"></p>

	<script>
		document
			.getElementById("sendRequest")
			.addEventListener("click", async () => {
				const data = {
					accept: true, // Согласен с условиями
					data: {
						phone: "+79991234567",
						name: "Иван",
						surname: "Иванов",
						email: "ivan@example.com",
						pick_up_datetime: "28.11.2024 12:00",
						drop_off_datetime: "30.11.2024 12:00",
						currency: { id: 1 },
					},
					full_data: JSON.stringify({
						info: { someInfo: "value" },
						extras: { extraOption: "value" },
						vehicle: { carId: 123 },
						equipment: { gps: true },
					}),
				};

				try {
					const response = await fetch(
						"https://new.mycarrental.ru/order/store",
						{
							method: "POST",
							headers: {
								"Content-Type": "application/json",
							},
							body: JSON.stringify(data),
						},
					);

					const result = await response.json();
					document.getElementById("response").innerText = JSON.stringify(
						result,
						null,
						2,
					);
				} catch (error) {
					document.getElementById("response").innerText =
						`Ошибка: ${error.message}`;
				}
			});
	</script>
</Layout>
